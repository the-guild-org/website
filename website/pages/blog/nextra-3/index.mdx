---
title: Nextra 3 ‚Äì Your Favourite MDX Framework, Now on üß™ Steroids
tags: [nextra, nextjs, react]
authors: dimitri
date: 2023-12-12
updateDate: 2024-09-28
description:
  MDX 3, new i18n, new _meta files with JSX support, more powerful TOC, remote MDX, better bundle
  size, MathJax, new code block styles, shikiji, ESM-only and more
image: https://nextra.site/og?title=Nextra%203
---

import { Fragment } from 'react'
import { FileTree } from '@theguild/components'

## Intro

Hi everyone üëã, I am [Dimitri POSTOLOV](https://github.com/dimaMachina), you may know me previously
as B2o5T (boost).

> I recently decided to change my nickname to easy-to-remember Dima Machina (for a long time that's
> what my team [The Guild](/) called me).

Once upon a time... I discovered [Nextra](https://github.com/shuding/nextra) and wanted to use it as
a base framework for [The Guild documentation websites](/#platform), I found a lot of issues and
started to contribute to this library to fix them and to help with the v2 release.

![My first PR in Nextra](./first-pr.png)

<div className="text-center">
  <>[My first PR in Nextra](https://github.com/shuding/nextra/pull/485)</>
</div>

Nextra 3 is currently available as an alpha release, and I am looking for feedback from the
community, choose your favourite package manager and try it:

```sh npm2yarn
npm i nextra@alpha            # Install Nextra
npm i nextra-theme-docs@alpha # Install Nextra Theme Docs
npm i nextra-theme-blog@alpha # Install Nextra Theme Blog
```

## What's New

Starting from releasing v2 in which release I actively contributed, I actively maintained Nextra and
received feedback from the community and ideas for future improvements.

So let's begin what I prepared with a new major release üéâ.

### MDX 3

Nextra 3 will be built on top of [MDX 3](https://mdxjs.com). There are no significant breaking
changes (as it was between MDX 1 and MDX 2). More info about what's new in MDX 3 can be found in
[the official blog post](https://mdxjs.com/blog/v3).

### Complete New I18n with Static Exports Support

I18n was rewritten from scratch. The previous i18n was hard to scalable especially when you have a
lot of languages, but also had really blocking issues, especially:

1. only the default locale was produced in sitemap
   [#712](https://github.com/shuding/nextra/issues/712)

2. index files were not working for subfolders
   [#1263](https://github.com/shuding/nextra/issues/1263)

3. build output directory for each locale contained all pages locales
   [#1922](https://github.com/shuding/nextra/issues/1922)

4. some static files were inaccessible [#1354](https://github.com/shuding/nextra/issues/1354)

The original proposal of better i18n by locale folders instead of locale suffix was proposed
[2 years ago](https://github.com/shuding/nextra/issues/176) and in Nextra 3 it was implemented by
me.

#### Comparison of I18n Project Structure for Nextra 2/3

| Nextra 2       | Nextra 3       |
| -------------- | -------------- |
| <Nextra2I18n/> | <Nextra3I18n/> |

export const i18nLocales = ['en', 'fr', 'ru']

export const i18nFiles = ['index', 'getting-started', '_meta']

export function Nextra2I18n() {
  return (
    <FileTree>
      <FileTree.Folder name="pages" defaultOpen>
        {i18nFiles.map(filename =>
          i18nLocales.map(locale => (
            <FileTree.File
              key={locale}
              name={`${filename}.${locale}.${filename === '_meta' ? 'json' : 'mdx'}`}
            />
          ))
        )}
      </FileTree.Folder>
    </FileTree>
  )
}

export function Nextra3I18n() {
  return (
    <FileTree>
      <FileTree.Folder name="pages" defaultOpen>
        {i18nLocales.map(locale => (
          <FileTree.Folder key={locale} name={locale} defaultOpen>
            {i18nFiles.map(filename => (
              <FileTree.File
                key={filename}
                name={`${filename}.${filename === '_meta' ? 'js' : 'mdx'}`}
              />
            ))}
          </FileTree.Folder>
        ))}
      </FileTree.Folder>
    </FileTree>
  )
}

You should know also a few notes:

1. By default, Next.js doesn't support project structure like above with the `i18n` property enabled
   in your `next.config`

If without Nextra you'll try to create this project structure, and you try to access
http://localhost:3000/en or http://localhost:3000/en/getting-started you'll get a 404 error. To fix
it Nextra set the `i18n` property in `next.config` to `undefined`. With `i18n` enabled and with
Nextra you'll see the following console warning:

```ansi filename="Terminal"
- [0;33mwarn[0m [nextra] Next.js doesn't support i18n by locale folder names.
When i18n enabled, Nextra unset nextConfig.i18n to `undefined`, use `useRouter` from `nextra/hooks`
if you need `locale` or `defaultLocale` values.
```

2. `useRouter` from `next/router` returns incorrect `locale` and `defaultLocale` values (since
   `i18n` was unset), so instead you should use `useRouter` from `nextra/hooks` which will return
   correct values.

3. Popular i18n libraries like [`react-intl`](https://formatjs.io/docs/getting-started/installation)
   and [`react-i18next`](https://react.i18next.com) or
   [others](https://nextjs.org/docs/pages/building-your-application/routing/internationalization)
   will not work either.

<Callout type="warning">
  Keep in mind that, you may not need the above i18n libraries since maintaining docs and keeping
  them updated for multiple languages is really hard, and you may just use some platform like
  [Crowdin](https://crowdin.com) that will translate docs for you once the default language is
  changed. Also Crowdin is free for Open Source üòç.
</Callout>

<Callout emoji="üéâ">
  On the other hand, since Nextra under the hood disables `i18n` in `next.config` your i18n docs
  website could have static exports!
</Callout>

### New `_meta.{js,jsx,ts,tsx}` Files with JSX Support

After one year of
[creating my proposal of using `_meta.js` instead of `_meta.json`](https://github.com/shuding/nextra/issues/852),
I finally found a way of implementing the trickiest feature of Nextra 3 and `_meta.json` files are
no longer supported.

<Tweet tweetLink="dimaMachina_/status/1699973091214921938" />

This means that:

- you can use either `_meta.js` or `_meta.jsx` with JSX support or `_meta.{ts,tsx}` for TypeScript
  projects instead
- you can use ESLint's built-in rule `sort-keys` with `/* eslint sort-keys: error */` comment to
  sort your sidebar items alphabetically
- you can export and import everything that you want in your `_meta` files
- you can have typesafe `_meta.{ts,tsx}` files while asserting type definition from the `nextra`
  package
- you can add a banner/footer for your repeated content in `_meta` files, for individual pages, or
  for all nested pages in `*` key

<Callout type='warning'>
  In the case of using [`next-sitemap`](https://github.com/iamvishnusankar/next-sitemap), you probably
  need to add `exclude: ['*/_meta']{:js}` in your `next-sitemap.config.js` since [it's tricky to exclude
  `_meta` files from the build](https://github.com/vercel/next.js/issues/8974#issuecomment-542525837).
</Callout>

### More Powerful TOC

There is no MDX framework where TOC can be better than in Nextra 3 (Correct me if I am wrong üôÇ).

<Callout emoji="‚ù§Ô∏è" type="error">
  If you wanna this feature to be part of your MDX framework or Open Source, ping me and I'll try my
  best to publish it as my separate Open Source package.
</Callout>

Previously TOC could show only static content from your headings, and it showed unexpected results
for dynamic content [#2411](https://github.com/shuding/nextra/issues/2411)
[#1955](https://github.com/shuding/nextra/issues/1955)
[#2076](https://github.com/shuding/nextra/issues/2076)
[#1884](https://github.com/shuding/nextra/issues/1884).

With Nextra 3 all issues are fixed, and everything that is inserted in your main content is properly
rendered in TOC too üòç.

<Tweet tweetLink="dimaMachina_/status/1707502267107311667" />

### Better Bundle Size

A lot of work was done to make Nextra's bundle size smaller, I deep-dived into the generated `_app`
file and took a look what is included and what can be removed.

Let's do some calculations! üßÆ

<Callout>
  **Note**: all 4 examples for v2 and v3 were updated on the latest Next.js 13.5.6 at the moment of
  writing this blog post.
</Callout>

#### Build Output of Blog Example Website

<details>
  <summary>with Nextra 2</summary>

https://github.com/shuding/nextra/tree/66798f8e7f92cca80f2d62d19f9db5667bcc62ef/examples/blog

```ansi filename="Terminal"
[0;4mRoute (pages)[0m                               [0;4mSize[0m     [0;4mFirst Load JS[0m
‚îå ‚óã /                                       1.08 kB         [0;32m119 kB[0m
‚îú   /_app                                   0 B             [0;32m114 kB[0m
‚îú ‚óã /404                                    180 B           [0;32m115 kB[0m
‚îú ‚óã /posts                                  588 B           [0;32m119 kB[0m
‚îú ‚óã /posts/aaron-swartz-a-programmable-web  3.53 kB         [0;32m122 kB[0m
‚îú ‚óã /posts/callout                          1.98 kB         [0;32m120 kB[0m
‚îú ‚óã /posts/code-blocks                      1.53 kB         [0;32m120 kB[0m
‚îú ‚óã /posts/draft                            795 B           [0;32m119 kB[0m
‚îú ‚óã /posts/table                            844 B           [0;32m119 kB[0m
‚îî ‚óè /tags/[tag] ([0;32m716 ms[0m)                    788 B           [0;32m119 kB[0m
    ‚îú /tags/web development
    ‚îú /tags/JavaScript
    ‚îú /tags/GraphQL
    ‚îî [+6 more paths]
+ First Load JS shared by all               [0;32m123 kB[0m
  ‚îú chunks/framework-bce0fd2bcc8d4c85.js    45.3 kB
  ‚îú chunks/main-48077aa82984b023.js         37.6 kB
  ‚îú chunks/pages/_app-83deac736929a1bc.js   29.6 kB
  ‚îú chunks/webpack-109eb0aced926db3.js      1.81 kB
  ‚îî css/e187e49945a86f29.css                8.61 kB

‚óã  (Static)  automatically rendered as static HTML (uses no initial props)
‚óè  (SSG)     automatically generated as static HTML + JSON (uses [0;36mgetStaticProps[0m)
```

</details>

<details>
  <summary>with **Nextra 3**</summary>

https://github.com/shuding/nextra/tree/c2ad837d3dacd87e1aa3ea3b9839f18062ae1c25/examples/blog

```ansi filename="Terminal"
[0;4mRoute (pages)[0m                               [0;4mSize[0m     [0;4mFirst Load JS[0m
‚îå ‚óã /                                       1.61 kB         [0;32m108 kB[0m
‚îú ‚óã /404                                    180 B           [0;32m101 kB[0m
‚îú ‚óã /posts                                  1.12 kB         [0;32m107 kB[0m
‚îú ‚óã /posts/aaron-swartz-a-programmable-web  3.93 kB         [0;32m110 kB[0m
‚îú ‚óã /posts/callout                          11.2 kB         [0;32m117 kB[0m
‚îú ‚óã /posts/code-blocks                      2.02 kB         [0;32m108 kB[0m
‚îú ‚óã /posts/draft                            1.28 kB         [0;32m107 kB[0m
‚îú ‚óã /posts/table                            1.35 kB         [0;32m107 kB[0m
‚îî ‚óè /tags/[tag] ([0;32m872 ms[0m)                    1.34 kB         [0;32m107 kB[0m
    ‚îú /tags/web development
    ‚îú /tags/JavaScript
    ‚îú /tags/GraphQL
    ‚îî [+6 more paths]
+ First Load JS shared by all               [0;32m101 kB[0m
  ‚îú chunks/framework-bce0fd2bcc8d4c85.js    45.3 kB
  ‚îú chunks/main-c12ab09220a28f5f.js         37.8 kB
  ‚îú chunks/pages/_app-f6bbbcf4ee8f890e.js   16.2 kB
  ‚îî chunks/webpack-d4712bf1c9b5b172.js      1.81 kB

‚óã  (Static)  automatically rendered as static HTML (uses no initial props)
‚óè  (SSG)     automatically generated as static HTML + JSON (uses [0;36mgetStaticProps[0m)
```

</details>

Let's compare everything starting from the `First Load JS shared by all` lines:

```diff filename="Comparison of bundle size for Nextra 2/3"
-+ First Load JS shared by all               123 kB
++ First Load JS shared by all               101 kB
   ‚îú chunks/framework-bce0fd2bcc8d4c85.js    45.3 kB
-  ‚îú chunks/main-48077aa82984b023.js         37.6 kB
+  ‚îú chunks/main-c12ab09220a28f5f.js         37.8 kB
-  ‚îú chunks/pages/_app-83deac736929a1bc.js   29.6 kB
+  ‚îú chunks/pages/_app-f6bbbcf4ee8f890e.js   16.2 kB
   ‚îú chunks/webpack-109eb0aced926db3.js      1.81 kB
-  ‚îî css/e187e49945a86f29.css                8.61 kB
```

<Callout type="info">
  We can assume that the first load is decreased by **17.89%** and `_app` file is decreased by
  **45.27%** for `nextra-theme-blog` ü§Ø.
</Callout>

<Callout type="warning">
  **Note**: the `.css` file is not included in the bundle report for Nextra 3, because the v3 blog
  example just doesn't contain a custom `_app` file, and importing CSS from `node_modules` is not
  possible for `pages` router, so instead `.css` file is imported in each MDX page (in Nextra's
  webpack loader).
</Callout>

#### Build Output of I18n Docs Website with LaTeX Enabled

<details>
  <summary>with Nextra 2</summary>

https://github.com/shuding/nextra/tree/66798f8e7f92cca80f2d62d19f9db5667bcc62ef/examples/swr-site

```ansi filename="Terminal"
[0;4mRoute (pages)[0m                                                [0;4mSize[0m     [0;4mFirst Load JS[0m
‚îå   /_app                                                    0 B             [0;31;1m187 kB[0m
‚îú ‚óã /404                                                     560 B           [0;31;1m191 kB[0m
‚îú ‚óã /500                                                     555 B           [0;31;1m191 kB[0m
‚îú ‚óã /about/a-page.en-US                                      527 B           [0;31;1m191 kB[0m
‚îú ‚óã /about/acknowledgement.en-US                             526 B           [0;31;1m191 kB[0m
‚îú ‚óã /about/changelog.en-US                                   1.22 kB         [0;31;1m192 kB[0m
‚îú ‚óã /about/team.en-US                                        574 B           [0;31;1m191 kB[0m
‚îú ‚óã /blog.en-US                                              1.5 kB          [0;31;1m192 kB[0m
‚îú ‚óã /blog.ru                                                 1.5 kB          [0;31;1m192 kB[0m
‚îú ‚óã /blog/swr-v1.en-US                                       6.32 kB         [0;31;1m197 kB[0m
‚îú ‚óã /blog/swr-v1.ru                                          8.1 kB          [0;31;1m199 kB[0m
‚îú ‚óã /docs/404-500.en-US                                      1.44 kB         [0;31;1m192 kB[0m
‚îú ‚óã /docs/advanced.en-US                                     909 B           [0;31;1m192 kB[0m
‚îú ‚óã /docs/advanced/cache.en-US                               4.46 kB         [0;31;1m204 kB[0m
‚îú ‚óã /docs/advanced/cache.ru                                  5.74 kB         [0;31;1m205 kB[0m
‚îú ‚óã /docs/advanced/code-highlighting.en-US                   1.39 kB         [0;31;1m192 kB[0m
‚îú ‚óã /docs/advanced/dynamic-markdown-import.en-US             2.92 kB         [0;31;1m194 kB[0m
‚îú ‚óã /docs/advanced/file-name.with.DOTS.en-US                 557 B           [0;31;1m191 kB[0m
‚îú ‚óã /docs/advanced/file-name.with.DOTS.es-ES                 568 B           [0;31;1m191 kB[0m
‚îú ‚óã /docs/advanced/file-name.with.DOTS.ru                    621 B           [0;31;1m191 kB[0m
‚îú ‚óã /docs/advanced/images.en-US                              892 B           [0;31;1m192 kB[0m
‚îú ‚óã /docs/advanced/markdown-import.en-US                     4.69 kB         [0;31;1m195 kB[0m
‚îú ‚óã /docs/advanced/more/loooooooooooooooooooong-title.en-US  637 B           [0;31;1m191 kB[0m
‚îú ‚óè /docs/advanced/more/tree/one.en-US                       588 B           [0;31;1m191 kB[0m
‚îú ‚óã /docs/advanced/more/tree/three.en-US                     532 B           [0;31;1m191 kB[0m
‚îú ‚óè /docs/advanced/more/tree/two.en-US                       587 B           [0;31;1m191 kB[0m
‚îú ‚óã /docs/advanced/performance.en-US                         2.97 kB         [0;31;1m194 kB[0m
‚îú ‚óã /docs/advanced/performance.es-ES                         3.15 kB         [0;31;1m194 kB[0m
‚îú ‚óã /docs/advanced/performance.ru                            3.79 kB         [0;31;1m195 kB[0m
‚îú ‚óã /docs/advanced/react-native.en-US                        2.51 kB         [0;31;1m193 kB[0m
‚îú ‚óã /docs/advanced/react-native.ru                           3.08 kB         [0;31;1m194 kB[0m
‚îú ‚óã /docs/advanced/scrollbar-x.en-US                         1.72 kB         [0;31;1m192 kB[0m
‚îú ‚óã /docs/arguments.en-US                                    1.9 kB          [0;31;1m193 kB[0m
‚îú ‚óã /docs/arguments.es-ES                                    1.98 kB         [0;31;1m193 kB[0m
‚îú ‚óã /docs/arguments.ru                                       2.23 kB         [0;31;1m193 kB[0m
‚îú ‚óã /docs/callout.en-US                                      693 B           [0;31;1m191 kB[0m
‚îú ‚óè /docs/change-log.en-US                                   898 B           [0;31;1m192 kB[0m
‚îú ‚óè /docs/change-log.es-ES                                   928 B           [0;31;1m197 kB[0m
‚îú ‚óè /docs/change-log.ru                                      1.04 kB         [0;31;1m197 kB[0m
‚îú ‚óã /docs/code-block-without-language.en-US                  718 B           [0;31;1m191 kB[0m
‚îú ‚óã /docs/conditional-fetching.en-US                         1.56 kB         [0;31;1m192 kB[0m
‚îú ‚óã /docs/conditional-fetching.es-ES                         1.62 kB         [0;31;1m192 kB[0m
‚îú ‚óã /docs/conditional-fetching.ru                            1.87 kB         [0;31;1m193 kB[0m
‚îú ‚óã /docs/custom-header-ids.en-US                            1.02 kB         [0;31;1m192 kB[0m
‚îú ‚óã /docs/data-fetching.en-US                                1.97 kB         [0;31;1m193 kB[0m
‚îú ‚óã /docs/data-fetching.es-ES                                2.02 kB         [0;31;1m193 kB[0m
‚îú ‚óã /docs/data-fetching.ru                                   2.33 kB         [0;31;1m193 kB[0m
‚îú ‚óã /docs/error-handling.en-US                               2.81 kB         [0;31;1m194 kB[0m
‚îú ‚óã /docs/error-handling.es-ES                               2.96 kB         [0;31;1m194 kB[0m
‚îú ‚óã /docs/error-handling.ru                                  3.55 kB         [0;31;1m194 kB[0m
‚îú ‚óã /docs/getting-started.en-US                              8.96 kB         [0;31;1m200 kB[0m
‚îú ‚óã /docs/getting-started.es-ES                              7.88 kB         [0;31;1m199 kB[0m
‚îú ‚óã /docs/getting-started.ru                                 8.58 kB         [0;31;1m199 kB[0m
‚îú ‚óã /docs/global-configuration.en-US                         1.85 kB         [0;31;1m193 kB[0m
‚îú ‚óã /docs/global-configuration.es-ES                         1.9 kB          [0;31;1m193 kB[0m
‚îú ‚óã /docs/global-configuration.ru                            2.22 kB         [0;31;1m193 kB[0m
‚îú ‚óã /docs/middleware.en-US                                   3.9 kB          [0;31;1m195 kB[0m
‚îú ‚óã /docs/middleware.ru                                      4.75 kB         [0;31;1m196 kB[0m
‚îú ‚óã /docs/mutation.en-US                                     3.41 kB         [0;31;1m194 kB[0m
‚îú ‚óã /docs/mutation.es-ES                                     3.48 kB         [0;31;1m194 kB[0m
‚îú ‚óã /docs/mutation.ru                                        4.21 kB         [0;31;1m195 kB[0m
‚îú ‚óã /docs/options.en-US                                      2.42 kB         [0;31;1m193 kB[0m
‚îú ‚óã /docs/options.es-ES                                      2.57 kB         [0;31;1m193 kB[0m
‚îú ‚óã /docs/options.ru                                         3.21 kB         [0;31;1m194 kB[0m
‚îú ‚óã /docs/pagination.en-US                                   6.02 kB         [0;31;1m204 kB[0m
‚îú ‚óã /docs/pagination.es-ES                                   6.42 kB         [0;31;1m204 kB[0m
‚îú ‚óã /docs/pagination.ru                                      7.38 kB         [0;31;1m205 kB[0m
‚îú ‚óã /docs/prefetching.en-US                                  2.05 kB         [0;31;1m193 kB[0m
‚îú ‚óã /docs/prefetching.es-ES                                  2.14 kB         [0;31;1m193 kB[0m
‚îú ‚óã /docs/prefetching.ru                                     2.56 kB         [0;31;1m193 kB[0m
‚îú ‚óã /docs/raw-layout.en-US                                   1.24 kB         [0;31;1m192 kB[0m
‚îú ‚óã /docs/revalidation.en-US                                 2.76 kB         [0;31;1m198 kB[0m
‚îú ‚óã /docs/revalidation.es-ES                                 2.9 kB          [0;31;1m198 kB[0m
‚îú ‚óã /docs/revalidation.ru                                    3.5 kB          [0;31;1m199 kB[0m
‚îú ‚óã /docs/suspense.en-US                                     2.08 kB         [0;31;1m193 kB[0m
‚îú ‚óã /docs/suspense.es-ES                                     2.15 kB         [0;31;1m193 kB[0m
‚îú ‚óã /docs/suspense.ru                                        2.53 kB         [0;31;1m193 kB[0m
‚îú ‚óã /docs/typescript.en-US                                   2.37 kB         [0;31;1m193 kB[0m
‚îú ‚óã /docs/understanding.en-US                                3.88 kB         [0;31;1m199 kB[0m
‚îú ‚óã /docs/understanding.es-ES                                3.88 kB         [0;31;1m199 kB[0m
‚îú ‚óã /docs/understanding.ru                                   3.88 kB         [0;31;1m199 kB[0m
‚îú ‚óã /docs/with-nextjs.en-US                                  2.25 kB         [0;31;1m193 kB[0m
‚îú ‚óã /docs/with-nextjs.es-ES                                  2.39 kB         [0;31;1m193 kB[0m
‚îú ‚óã /docs/with-nextjs.ru                                     2.82 kB         [0;31;1m194 kB[0m
‚îú ‚óã /docs/wrap-toc-items.en-US                               1.39 kB         [0;31;1m192 kB[0m
‚îú ‚óã /docs/wrap-toc-items.es-ES                               1.39 kB         [0;31;1m192 kB[0m
‚îú ‚óã /docs/wrap-toc-items.ru                                  1.39 kB         [0;31;1m192 kB[0m
‚îú ‚óã /examples/auth.en-US                                     830 B           [0;31;1m192 kB[0m
‚îú ‚óã /examples/auth.es-ES                                     834 B           [0;31;1m192 kB[0m
‚îú ‚óã /examples/auth.ru                                        865 B           [0;31;1m192 kB[0m
‚îú ‚óã /examples/basic.en-US                                    832 B           [0;31;1m192 kB[0m
‚îú ‚óã /examples/basic.es-ES                                    834 B           [0;31;1m192 kB[0m
‚îú ‚óã /examples/basic.ru                                       875 B           [0;31;1m192 kB[0m
‚îú ‚óã /examples/error-handling.en-US                           839 B           [0;31;1m192 kB[0m
‚îú ‚óã /examples/error-handling.es-ES                           842 B           [0;31;1m192 kB[0m
‚îú ‚óã /examples/error-handling.ru                              875 B           [0;31;1m192 kB[0m
‚îú ‚óã /examples/full.en-US                                     815 B           [0;31;1m192 kB[0m
‚îú ‚óã /examples/infinite-loading.en-US                         851 B           [0;31;1m192 kB[0m
‚îú ‚óã /examples/infinite-loading.es-ES                         853 B           [0;31;1m192 kB[0m
‚îú ‚óã /examples/infinite-loading.ru                            896 B           [0;31;1m192 kB[0m
‚îú ‚óã /examples/ssr.en-US                                      840 B           [0;31;1m192 kB[0m
‚îú ‚óã /examples/ssr.ru                                         838 B           [0;31;1m192 kB[0m
‚îú ‚óã /foo.en-US                                               954 B           [0;31;1m192 kB[0m
‚îú ‚óã /index.en-US                                             4.34 kB         [0;31;1m195 kB[0m
‚îú ‚óã /index.es-ES                                             3.99 kB         [0;31;1m195 kB[0m
‚îú ‚óã /index.ru                                                4.38 kB         [0;31;1m195 kB[0m
‚îú ‚óã /remote/_meta                                            225 B           [0;31;1m187 kB[0m
‚îú ‚óã /remote/graphql-eslint/_meta                             237 B           [0;31;1m187 kB[0m
‚îú ‚óã /remote/graphql-yoga/_meta                               236 B           [0;31;1m187 kB[0m
‚îî ‚óã /test.en-US                                              786 B           [0;31;1m192 kB[0m
+ First Load JS shared by all                                [0;31;1m203 kB[0m
  ‚îú chunks/framework-733009b6474116fd.js                     45.3 kB
  ‚îú chunks/main-1dbce7e00d8751d5.js                          38.4 kB
  ‚îú chunks/pages/_app-f3b27ac2556aba2f.js                    101 kB
  ‚îú chunks/webpack-e7e126cbd02a5d11.js                       1.95 kB
  ‚îî css/86d65edbc5de703f.css                                 16.1 kB

∆í Middleware [0;32m26.8 kB[0m

‚óã  (Static)  automatically rendered as static HTML (uses no initial props)
‚óè  (SSG)     automatically generated as static HTML + JSON (uses [0;36mgetStaticProps[0m)
```

</details>

<details>
  <summary>with **Nextra 3**</summary>

https://github.com/shuding/nextra/tree/c2ad837d3dacd87e1aa3ea3b9839f18062ae1c25/examples/swr-site

```ansi filename="Terminal"
[0;4mRoute (pages)[0m                                                            [0;4mSize[0m     [0;4mFirst Load JS[0m
‚îå   /_app                                                                0 B             [0;33m148 kB[0m
‚îú ‚óã /404                                                                 183 B           [0;33m149 kB[0m
‚îú ‚óã /en                                                                  8.34 kB         [0;33m164 kB[0m
‚îú ‚óè /en/_meta                                                            247 B           [0;33m149 kB[0m
‚îú ‚óè /en/about/_meta                                                      251 B           [0;33m149 kB[0m
‚îú ‚óã /en/about/a-page                                                     472 B           [0;33m156 kB[0m
‚îú ‚óã /en/about/acknowledgement                                            471 B           [0;33m156 kB[0m
‚îú ‚óã /en/about/changelog                                                  1.17 kB         [0;33m157 kB[0m
‚îú ‚óã /en/about/team                                                       518 B           [0;33m156 kB[0m
‚îú ‚óã /en/blog                                                             1.22 kB         [0;33m157 kB[0m
‚îú ‚óè /en/blog/_meta                                                       250 B           [0;33m149 kB[0m
‚îú ‚óã /en/blog/swr-v1                                                      6.18 kB         [0;33m162 kB[0m
‚îú ‚óè /en/docs/_meta                                                       250 B           [0;33m149 kB[0m
‚îú ‚óã /en/docs/404-500                                                     1.28 kB         [0;33m157 kB[0m
‚îú ‚óã /en/docs/advanced                                                    855 B           [0;33m157 kB[0m
‚îú ‚óè /en/docs/advanced/_meta                                              258 B           [0;33m149 kB[0m
‚îú ‚óã /en/docs/advanced/cache                                              4.46 kB         [0;33m170 kB[0m
‚îú ‚óã /en/docs/advanced/code-highlighting                                  1.38 kB         [0;33m157 kB[0m
‚îú ‚óè /en/docs/advanced/dynamic-markdown-import                            2.89 kB         [0;33m159 kB[0m
‚îú ‚óã /en/docs/advanced/file-name.with.DOTS                                502 B           [0;33m156 kB[0m
‚îú ‚óã /en/docs/advanced/images                                             829 B           [0;33m157 kB[0m
‚îú ‚óã /en/docs/advanced/markdown-import                                    8.66 kB         [0;33m165 kB[0m
‚îú ‚óã /en/docs/advanced/more/loooooooooooooooooooong-title                 591 B           [0;33m157 kB[0m
‚îú ‚óè /en/docs/advanced/more/tree/one                                      507 B           [0;33m156 kB[0m
‚îú ‚óã /en/docs/advanced/more/tree/three                                    475 B           [0;33m156 kB[0m
‚îú ‚óã /en/docs/advanced/more/tree/two                                      492 B           [0;33m156 kB[0m
‚îú ‚óã /en/docs/advanced/performance                                        2.95 kB         [0;33m159 kB[0m
‚îú ‚óã /en/docs/advanced/react-native                                       3.02 kB         [0;33m159 kB[0m
‚îú ‚óã /en/docs/advanced/scrollbar-x                                        5.33 kB         [0;33m161 kB[0m
‚îú ‚óã /en/docs/arguments                                                   2.35 kB         [0;33m158 kB[0m
‚îú ‚óã /en/docs/callout                                                     1.13 kB         [0;33m157 kB[0m
‚îú ‚óè /en/docs/change-log                                                  810 B           [0;33m157 kB[0m
‚îú ‚óã /en/docs/code-block-without-language                                 604 B           [0;33m157 kB[0m
‚îú ‚óã /en/docs/conditional-fetching                                        1.54 kB         [0;33m157 kB[0m
‚îú ‚óã /en/docs/custom-header-ids                                           987 B           [0;33m157 kB[0m
‚îú ‚óã /en/docs/data-fetching                                               2.45 kB         [0;33m158 kB[0m
‚îú ‚óã /en/docs/error-handling                                              3.3 kB          [0;33m159 kB[0m
‚îú ‚óã /en/docs/getting-started                                             14.4 kB         [0;31;1m170 kB[0m
‚îú ‚óã /en/docs/global-configuration                                        1.86 kB         [0;33m158 kB[0m
‚îú ‚óã /en/docs/middleware                                                  4.28 kB         [0;33m160 kB[0m
‚îú ‚óã /en/docs/mutation                                                    3.36 kB         [0;33m159 kB[0m
‚îú ‚óã /en/docs/options                                                     2.86 kB         [0;33m159 kB[0m
‚îú ‚óã /en/docs/pagination                                                  5.9 kB          [0;33m170 kB[0m
‚îú ‚óã /en/docs/prefetching                                                 2.02 kB         [0;33m158 kB[0m
‚îú ‚óã /en/docs/raw-layout                                                  1.2 kB          [0;33m157 kB[0m
‚îú ‚óã /en/docs/revalidation                                                2.71 kB         [0;33m164 kB[0m
‚îú ‚óã /en/docs/suspense                                                    2.52 kB         [0;33m158 kB[0m
‚îú ‚óã /en/docs/typescript                                                  2.36 kB         [0;33m158 kB[0m
‚îú ‚óã /en/docs/understanding                                               3.85 kB         [0;33m165 kB[0m
‚îú ‚óã /en/docs/with-nextjs                                                 2.71 kB         [0;33m159 kB[0m
‚îú ‚óã /en/docs/wrap-toc-items                                              1.31 kB         [0;33m157 kB[0m
‚îú ‚óè /en/examples/_meta                                                   254 B           [0;33m149 kB[0m
‚îú ‚óã /en/examples/auth                                                    738 B           [0;33m157 kB[0m
‚îú ‚óã /en/examples/basic                                                   738 B           [0;33m157 kB[0m
‚îú ‚óã /en/examples/error-handling                                          747 B           [0;33m157 kB[0m
‚îú ‚óã /en/examples/full                                                    729 B           [0;33m157 kB[0m
‚îú ‚óã /en/examples/infinite-loading                                        753 B           [0;33m157 kB[0m
‚îú ‚óã /en/examples/ssr                                                     754 B           [0;33m157 kB[0m
‚îú ‚óã /en/foo                                                              4.68 kB         [0;33m161 kB[0m
‚îú ‚óè /en/remote/graphql-eslint/_meta                                      264 B           [0;33m149 kB[0m
‚îú ‚óè /en/remote/graphql-eslint/[[...slug]] ([0;33m1853 ms[0m)                      4.86 kB         [0;33m161 kB[0m
‚îú   ‚îú /en/remote/graphql-eslint/custom-rules ([0;32m464 ms[0m)
‚îú   ‚îú /en/remote/graphql-eslint/getting-started ([0;32m373 ms[0m)
‚îú   ‚îú /en/remote/graphql-eslint/getting-started/parser-options ([0;32m345 ms[0m)
‚îú   ‚îú /en/remote/graphql-eslint/configs
‚îú   ‚îú /en/remote/graphql-eslint/getting-started/parser
‚îú   ‚îî /en/remote/graphql-eslint/index
‚îú ‚óè /en/remote/graphql-yoga/_meta                                        263 B           [0;33m149 kB[0m
‚îú ‚óè /en/remote/graphql-yoga/[[...slug]] ([0;31;1m32819 ms[0m)                       4.88 kB         [0;33m161 kB[0m
‚îú   ‚îú /en/remote/graphql-yoga/features/subscriptions ([0;31;1m2996 ms[0m)
‚îú   ‚îú /en/remote/graphql-yoga/features/context ([0;31;1m2885 ms[0m)
‚îú   ‚îú /en/remote/graphql-yoga/features/file-uploads ([0;31;1m2777 ms[0m)
‚îú   ‚îú /en/remote/graphql-yoga/features/apollo-federation ([0;31;1m2738 ms[0m)
‚îú   ‚îú /en/remote/graphql-yoga/features/graphiql ([0;31;1m2724 ms[0m)
‚îú   ‚îú /en/remote/graphql-yoga/features/cors ([0;31;1m2674 ms[0m)
‚îú   ‚îú /en/remote/graphql-yoga/features/testing ([0;31;1m2560 ms[0m)
‚îú   ‚îî [+16 more paths] (avg [0;32m842 ms[0m)
‚îú ‚óã /en/test                                                             699 B           [0;33m157 kB[0m
‚îú ‚óã /es                                                                  5.56 kB         [0;33m159 kB[0m
‚îú ‚óè /es/_meta                                                            247 B           [0;33m149 kB[0m
‚îú ‚óè /es/docs/_meta                                                       251 B           [0;33m149 kB[0m
‚îú ‚óè /es/docs/advanced/_meta                                              256 B           [0;33m149 kB[0m
‚îú ‚óã /es/docs/advanced/file-name.with.DOTS                                1.78 kB         [0;33m155 kB[0m
‚îú ‚óã /es/docs/advanced/performance                                        4.39 kB         [0;33m157 kB[0m
‚îú ‚óã /es/docs/arguments                                                   3.68 kB         [0;33m157 kB[0m
‚îú ‚óè /es/docs/change-log ([0;33m1096 ms[0m)                                        2.13 kB         [0;33m161 kB[0m
‚îú ‚óã /es/docs/conditional-fetching                                        2.86 kB         [0;33m156 kB[0m
‚îú ‚óã /es/docs/data-fetching                                               3.73 kB         [0;33m157 kB[0m
‚îú ‚óã /es/docs/error-handling                                              4.69 kB         [0;33m158 kB[0m
‚îú ‚óã /es/docs/getting-started                                             9.69 kB         [0;33m163 kB[0m
‚îú ‚óã /es/docs/global-configuration                                        3.18 kB         [0;33m156 kB[0m
‚îú ‚óã /es/docs/mutation                                                    4.72 kB         [0;33m158 kB[0m
‚îú ‚óã /es/docs/options                                                     4.21 kB         [0;33m157 kB[0m
‚îú ‚óã /es/docs/pagination                                                  7.57 kB         [0;33m168 kB[0m
‚îú ‚óã /es/docs/prefetching                                                 3.34 kB         [0;33m156 kB[0m
‚îú ‚óã /es/docs/revalidation                                                4.09 kB         [0;33m162 kB[0m
‚îú ‚óã /es/docs/suspense                                                    3.85 kB         [0;33m157 kB[0m
‚îú ‚óã /es/docs/understanding                                               5.1 kB          [0;33m163 kB[0m
‚îú ‚óã /es/docs/with-nextjs                                                 4.07 kB         [0;33m157 kB[0m
‚îú ‚óã /es/docs/wrap-toc-items                                              2.6 kB          [0;33m156 kB[0m
‚îú ‚óè /es/examples/_meta                                                   253 B           [0;33m149 kB[0m
‚îú ‚óã /es/examples/auth                                                    1.99 kB         [0;33m155 kB[0m
‚îú ‚óã /es/examples/basic                                                   2 kB            [0;33m155 kB[0m
‚îú ‚óã /es/examples/error-handling                                          2 kB            [0;33m155 kB[0m
‚îú ‚óã /es/examples/infinite-loading                                        2 kB            [0;33m155 kB[0m
‚îú ‚óã /ru                                                                  6.18 kB         [0;33m159 kB[0m
‚îú ‚óè /ru/_meta                                                            248 B           [0;33m149 kB[0m
‚îú ‚óã /ru/blog                                                             2.85 kB         [0;33m156 kB[0m
‚îú ‚óè /ru/blog/_meta                                                       251 B           [0;33m149 kB[0m
‚îú ‚óã /ru/blog/swr-v1                                                      9.12 kB         [0;33m162 kB[0m
‚îú ‚óè /ru/docs/_meta                                                       250 B           [0;33m149 kB[0m
‚îú ‚óè /ru/docs/advanced/_meta                                              258 B           [0;33m149 kB[0m
‚îú ‚óã /ru/docs/advanced/cache                                              7.15 kB         [0;33m169 kB[0m
‚îú ‚óã /ru/docs/advanced/file-name.with.DOTS                                2.15 kB         [0;33m155 kB[0m
‚îú ‚óã /ru/docs/advanced/performance                                        5.2 kB          [0;33m158 kB[0m
‚îú ‚óã /ru/docs/advanced/react-native                                       5.05 kB         [0;33m158 kB[0m
‚îú ‚óã /ru/docs/arguments                                                   4.21 kB         [0;33m157 kB[0m
‚îú ‚óè /ru/docs/change-log ([0;33m1101 ms[0m)                                        2.56 kB         [0;33m161 kB[0m
‚îú ‚óã /ru/docs/conditional-fetching                                        3.36 kB         [0;33m156 kB[0m
‚îú ‚óã /ru/docs/data-fetching                                               4.26 kB         [0;33m157 kB[0m
‚îú ‚óã /ru/docs/error-handling                                              5.49 kB         [0;33m159 kB[0m
‚îú ‚óã /ru/docs/getting-started                                             10.6 kB         [0;33m164 kB[0m
‚îú ‚óã /ru/docs/global-configuration                                        3.73 kB         [0;33m157 kB[0m
‚îú ‚óã /ru/docs/middleware                                                  6.59 kB         [0;33m160 kB[0m
‚îú ‚óã /ru/docs/mutation                                                    5.65 kB         [0;33m159 kB[0m
‚îú ‚óã /ru/docs/options                                                     5.05 kB         [0;33m158 kB[0m
‚îú ‚óã /ru/docs/pagination                                                  8.66 kB         [0;33m169 kB[0m
‚îú ‚óã /ru/docs/prefetching                                                 3.97 kB         [0;33m157 kB[0m
‚îú ‚óã /ru/docs/revalidation                                                4.91 kB         [0;33m163 kB[0m
‚îú ‚óã /ru/docs/suspense                                                    4.47 kB         [0;33m158 kB[0m
‚îú ‚óã /ru/docs/understanding                                               5.5 kB          [0;33m164 kB[0m
‚îú ‚óã /ru/docs/with-nextjs                                                 4.73 kB         [0;33m158 kB[0m
‚îú ‚óã /ru/docs/wrap-toc-items                                              2.98 kB         [0;33m156 kB[0m
‚îú ‚óè /ru/examples/_meta                                                   253 B           [0;33m149 kB[0m
‚îú ‚óã /ru/examples/auth                                                    2.37 kB         [0;33m155 kB[0m
‚îú ‚óã /ru/examples/basic                                                   2.37 kB         [0;33m155 kB[0m
‚îú ‚óã /ru/examples/error-handling                                          2.38 kB         [0;33m155 kB[0m
‚îú ‚óã /ru/examples/infinite-loading                                        2.38 kB         [0;33m155 kB[0m
‚îî ‚óã /ru/examples/ssr                                                     2.38 kB         [0;33m155 kB[0m
+ First Load JS shared by all                                            [0;33m163 kB[0m
  ‚îú chunks/framework-733009b6474116fd.js                                 45.3 kB
  ‚îú chunks/main-3f7e5ffcd26ef392.js                                      37.9 kB
  ‚îú chunks/pages/_app-163bf496e5a12010.js                                63.4 kB
  ‚îú chunks/webpack-958fb7687230bd78.js                                   1.89 kB
  ‚îî css/a30520c2298a663c.css                                             14.6 kB

‚óã  (Static)  automatically rendered as static HTML (uses no initial props)
‚óè  (SSG)     automatically generated as static HTML + JSON (uses [0;36mgetStaticProps[0m)
```

</details>

Let's compare everything starting from the `First Load JS shared by all` lines:

```diff filename="Comparison of bundle size for Nextra 2/3"
-+ First Load JS shared by all                                203 kB
++ First Load JS shared by all                                163 kB
   ‚îú chunks/framework-733009b6474116fd.js                     45.3 kB
-  ‚îú chunks/main-1dbce7e00d8751d5.js                          38.4 kB
+  ‚îú chunks/main-3f7e5ffcd26ef392.js                          37.9 kB
-  ‚îú chunks/pages/_app-f3b27ac2556aba2f.js                    101 kB
+  ‚îú chunks/pages/_app-163bf496e5a12010.js                    63.4 kB
-  ‚îú chunks/webpack-e7e126cbd02a5d11.js                       1.95 kB
+  ‚îú chunks/webpack-958fb7687230bd78.js                       1.89 kB
-  ‚îî css/86d65edbc5de703f.css                                 16.1 kB
+  ‚îî css/a30520c2298a663c.css                                 14.6 kB
```

<Callout type="info">
  We can assume that the first load is decreased by **19.7%** and the `_app` file is decreased by
  **37.23%** for `nextra-theme-docs` ü§Ø.
</Callout>

### Remote Docs Support

Nextra 2 already had undocumented remote docs support, and now remote docs are officially supported.
You can do it with a few lines of code ü§Ø. To render your remote docs, you'll need 2 exports:

1. `buildDynamicMDX` and `buildDynamicMeta` from `nextra/remote`

   - `buildDynamicMDX` - compile your MDX data into an evaluable function
   - `buildDynamicMeta` - create [a page map](https://nextra.site/docs/guide/organize-files) for
     your
     [catch-all `[[...slug]].mdx` route](https://nextjs.org/docs/pages/building-your-application/routing/dynamic-routes#optional-catch-all-segments)

1. `RemoteContent` from `nextra/components` - React component which evaluates your compiled remote
   MDX.
   <Callout type="warning">
     All imports/exports expressions are stripped by the `buildDynamicMDX` function since in remote
     MDX it's impossible to use them, imported components in your remote MDX should be passed
     instead in `RemoteContent`'s `components` prop.
   </Callout>

#### [An Example of Remote Docs Fetched from GitHub](https://github.com/shuding/nextra/tree/c2ad837d3dacd87e1aa3ea3b9839f18062ae1c25/examples/swr-site/pages/en/remote/graphql-eslint)

Where for current example:

- `user`: `"dimaMachina"`
- `repo`: `"graphql-eslint"`
- `branch`: `"master"`
- `docsPath`: `"website/src/pages/docs/"`
- `filePaths`: An array of available docs file paths of your remote doc, for example:

```json filename="graphql-eslint's filePaths array"
[
  "configs.mdx",
  "custom-rules.mdx",
  "getting-started.mdx",
  "getting-started/parser-options.mdx",
  "getting-started/parser.mdx",
  "index.mdx"
]
```

```mdx filename="pages/graphql-eslint/docs/[[...slug]].mdx" showLineNumbers {1-2,11-12,28}
import { Callout, RemoteContent } from 'nextra/components'
import { buildDynamicMDX, buildDynamicMeta } from 'nextra/remote'
import { branch, docsPath, filePaths, repo, user } from '@somewhere/graphq-eslint-data'

export async function getStaticProps({ params }) {
  const path = params.slug?.join('/') ?? 'index'
  const foundPath = filePaths.find(filePath => filePath.replace(/\.mdx?/, '') === path)
  const url = `https://raw.githubusercontent.com/${user}/${repo}/${branch}/${docsPath}${foundPath}`
  const response = await fetch(url)
  const data = await response.text()
  const { __nextra_pageMap } = await buildDynamicMeta()
  const dynamicMdx = await buildDynamicMDX(data, { defaultShowCopyCode: true })
  return {
    props: {
      __nextra_pageMap,
      ...dynamicMdx
    }
  }
}

export const getStaticPaths = () => ({
  fallback: 'blocking',
  paths: filePaths.map(filePath => ({
    params: { slug: filePath.replace(/\.mdx?$/, '').split('/') }
  }))
})

<RemoteContent components={{ Callout }} />
```

#### An Example of Remote Docs' `_meta.js` That Will Fill Sidebar Items

```js filename="pages/graphql-eslint/docs/_meta.js"
import { createCatchAllMeta } from 'nextra/catch-all'
// filePaths: An array of available docs file paths of your remote doc
import { filePaths } from '@somewhere/graphq-eslint-data'

// Note: for remote MDX `_meta.js` should return a function instead of an object
export default () => createCatchAllMeta(filePaths)
```

[Click to see the final result](https://nextra-theme-docs-pf450a1cc.vercel.sh/en/remote/graphql-eslint).

### `_app.mdx` Is Removed

`_app.mdx` was an undocumented file, a custom workaround that was added after the v2 release to
avoid OOM (Out of Memory) problems for projects with a lot of MDX pages, he worked pretty well and
showed incredible results in improving bundle size
[#1448](https://github.com/shuding/nextra/pull/1448) and
[#1463](https://github.com/shuding/nextra/pull/1463).

But he confused people since no type definition can be used inside him, and no variable declarations
in your MDX too (only `export const ...` or `export let ...`).

With the v3 release, I'm happy to announce that your bundle size is improved with the regular
`_app.{js,jsx,ts,tsx}` file or even without ü§Ø!

<Callout>
  A good thing to know is that if you don't use custom `_app`/`_document`/`_error` in your project,
  Next.js anyway will use some [default
  ones](https://github.com/vercel/next.js/tree/canary/packages/next/src/pages) ü§ì.
</Callout>

### [MathJax](https://mathjax.org) Support

In addition to [KaTeX](https://katex.org), Nextra 3 can render LaTeX expressions with
[MathJax](https://mathjax.org) to dynamically render math in the browser.

MathJax rendering is enabled by setting `renderer: 'mathjax'{:js}` in your Nextra config:

```js filename="next.config.mjs" {3}
const withNextra = nextra({
  latex: {
    renderer: 'mathjax'
  }
})
```

With KaTeX, math is pre-rendered which means flicker-free and faster page loads. However, KaTeX does
not support all of the features of MathJax, especially features related to accessibility.

Because of MathJax's accessibility features, the LaTeX formula is tab-accessible and has a context
menu that helps screen readers reprocess math for the visually impaired.

> Huge thanks to [siefkenj](https://github.com/siefkenj) who created the initial PR and updated docs
> for the MathJax section ‚ù§Ô∏è

### Hello ESM, Goodbye CJS

Nextra 2 was a mix of CJS/ESM bundles, Nextra 3 now is built as an ESM-only package, and the CJS
`next.config.js` file is no longer supported.

<Callout>
  To use Nextra 3 you should use an ESM `next.config.mjs` or add `"type": "module"` in your
  `package.json` file and use an ESM `next.config.js` with `js` extension.
</Callout>

### Bumping Minimal Node.js to 18

Node.js 18 is now the minimum supported version since Node.js 16 is EOL and no longer supported üëã.

### `NextraConfig` In `next.config.js` Now Validated by Zod

To improve the development experience and avoid mistakes when users pass `NextConfig` option in
`NextraConfig` nextra config is now validated by Zod.

### New Code Blocks for `nextra-theme-docs` and `nextra-theme-blog`

Code block styles were inspired by the Next.js docs website, also now they contain icons for some
program languages.

<Tweet tweetLink="dimaMachina_/status/1706404939789172834" />

### Replacement `shiki` by `shikiji`

Recently [Anthony Fu](https://github.com/antfu) released
[`shikiji`](https://github.com/antfu/shikiji) an ESM-focused rewrite of `shiki`.

> The downside of `shiki` is also that without `css-variables` theme, your dual themes are always
> rendered twice and an unneeded theme should be hidden with CSS, which I found very bad üòÆ‚Äçüí®.

With Nextra 3 `shikiji` is used instead of `shiki`. `github-light` and `github-dark` themes are used
by default instead of the previously custom `css-variables` theme.

---

## Migration Guide to Nextra 3

## `nextra`

<Steps>

### {'Ensure to use Node.js >= 18'}

Node.js 16 is EOL and no longer supported.

### {'Ensure to use React.js >= 18'}

### {'Ensure to use Next.js >= 13'}

### CJS `next.config.js` {'is no longer supported'}

Use ESM `next.config.mjs` or add `"type": "module"` in your `package.json` file and use ESM
`next.config.js`.

```js filename="next.config.mjs"
import nextra from 'nextra'

const withNextra = nextra({
  theme: 'nextra-theme-docs',
  themeConfig: './theme.config.jsx'
  // ... your Nextra config
})

export default withNextra({
  // ... your Next.js config
})
```

### `_app.mdx` {'is no longer supported'}

Use `_app.{js,jsx}` or `_app.{ts,tsx}` for TypeScript projects instead.

### `_meta.json` {'is no longer supported'}

Use `_meta.{js,jsx,ts,tsx}` instead.

### `nextra/ssg` {'export was removed'}

`useSSG` was renamed to `useData` and moved to `nextra/hooks`, `RemoteContent` was moved to
`nextra/components`.

```diff
- import { useSSG, RemoteContent } from 'nextra/data'
+ import { useData } from 'nextra/hooks'
+ import { RemoteContent } from 'nextra/components'
```

### `pageOpts.headings` {'was removed'}

To retrieve TOC now you can only via `toc` prop in the
[`wrapper` component](https://mdxjs.com/docs/using-mdx/#layout) which defines the layout (but a
local layout takes precedence).

```diff filename="my-custom-nextra-theme.js" {15,19}
import { MDXProvider } from 'nextra/mdx'
import { MySidebar, MyTOC } from '@somewhere/my-components'

export default function MyTheme({ children, pageOpts, themeConfig }) {
  return (
    <>
      <MySidebar />
-     <MDXProvider>{children}</MDXProvider>
-     <MyTOC toc={pageOpts.headings} />
+     <MDXProvider components={{ wrapper: MyWrapper }}>{children}</MDXProvider>
    </>
  )
}

+function MyWrapper({ children, toc }) {
+  return (
+    <>
+      {children}
+      <MyTOC toc={toc} />
+    </>
+  )
+}
```

### `nextra/filter-route-locale` and `nextra/locales` exports were removed{/* eslint-disable-line */}

With [implementing new i18n](#complete-new-i18n-with-static-exports-support) there is no need to use
`filterRouteLocale` helper function and `locales` middleware that previously redirected to a correct
route based on locale suffix.

### `Tab`, `Card` exports from `nextra/components` were removed{/* eslint-disable-line */}

Use `Tabs.Tab` and `Cards.Card` instead.

```diff filename="page.mdx"
-import { Tabs, Cards, Card, Tab } from 'nextra/components'
+import { Tabs, Cards } from 'nextra/components'

<Tabs items={[]}>
-  <Tab>...</Tab>
+  <Tabs.Tab>...</Tabs.Tab>
</Tabs>

<Cards>
-  <Card title="..." href="..." />
+  <Cards.Card title="..." href="..." />
</Cards>
```

### Import `md`/`mdx` {'files that are outside the working directory no longer supported'}

Use symlinks instead now.

### `nextraConfig.flexsearch` was renamed to `nextraConfig.search`{/* eslint-disable-line */}

### `$$` {'syntax no longer works for LaTeX'}

[`remark-math`](https://github.com/remarkjs/remark-math/tree/main/packages/remark-math) was upgraded
to [v6](https://github.com/remarkjs/remark-math/releases/tag/6.0.0) where the support of `$$` syntax
was removed. You probably should receive the following error:

```
TypeError: Cannot read properties of undefined (reading 'mathFlowInside')
```

To fix it `math` code block language should be used instead of `$$`:

````diff
- $$
+ ```math
  x^2
- $$
+ ```
````

</Steps>

## `nextra-theme-docs`

<Steps>

### {'Ensure to use Next.js >= 13'}

### `Steps`, `Callout`, `Tabs`, `Cards` and `FileTree` {'exports were removed'}

Import them now from `nextra/components` instead.

```diff
-import { Steps, Callout, Tabs, Cards, FileTree } from 'nextra-theme-docs'
+import { Steps, Callout, Tabs, Cards, FileTree } from 'nextra/components'
```

### Tailwind CSS classes prefixes now have `_` prefix instead of `nx-`{/* eslint-disable-line */}

If you have to select these classes in your custom CSS, consider updating them to new ones.

### `useConfig` {'hook was split into two hooks'} `useConfig` / `useThemeConfig`

```diff
-import { useConfig } from 'nextra-theme-docs'
+import { useThemeConfig } from 'nextra-theme-docs'

function MyComponent() {
  // Get options from `theme.config` file
-  const { banner, sidebar, toc, ... } = useConfig()
+  const { banner, sidebar, toc, ... } = useThemeConfig()
}
```

### Renames of several `theme.config` options{/* eslint-disable-line */}

- `primaryHue` ‚Üí `color.hue`

- `primarySaturation` ‚Üí `color.saturation`

- `i18n.text` ‚Üí `i18n.name`

- `banner.text` ‚Üí `banner.content`

- `editLink.text` ‚Üí `editLink.content`

- `footer.text` ‚Üí `footer.content`

### Removes of several `theme.config` options{/* eslint-disable-line */}

- `serverSideError`

- `useNextSeoProps` (Setup your `<head />` tags via `head` option now)

- `toc.headingComponent`

- `sidebar.titleComponent` (Use JSX elements in your `_meta` file instead, see below)

```js filename="_meta.jsx"
import { MySeparator } from '@somewhere/my-separator'

export default {
  // ...
  '-- Machina': {
    title: <MySeparator>Machina</MySeparator>,
    type: 'separator'
  }
}
```

### `<MatchSorterSearch />` {'was removed'}

### `git-url-parse` and `next-seo` were removed{/* eslint-disable-line */}

This was made to make the bundle smaller.

### `sidebar.toggleButton` is set to `true` by default{/* eslint-disable-line */}

### `toc.backToTop` should use a JSX element or a React component{/* eslint-disable-line */}

To disable it, you can set `toc.backToTop` to `null`.

</Steps>

## `nextra-theme-blog`

<Steps>

### {'Ensure to use Next.js >= 13'}

### `cusdis` option in the `theme.config` file was removed{/* eslint-disable-line */}

You need to pass `cusdis` options as props in `Cusdis` component.

</Steps>

## Conclusion

I'm very proud and happy to lead Nextra into the future. So many things have improved and so many
more improvements are coming in the future!

If you want to help Nextra ‚Äì spread the word about Nextra in ùïè with `#nextra` hashtag and subscribe
on me in [ùïè](https://x.com/dimaMachina_) and [GitHub](https://github.com/dimaMachina).
